<div class="login-wrapper">
  <div class="background-gradient"></div>
  <div class="background-blur"></div>

  <div class="login-container">
    <div class="login-branding">
      <div class="brand-icon">
        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
          <circle cx="32" cy="32" r="30" stroke="white" stroke-width="2" opacity="0.9" />
          <path d="M22 34L30 42L44 24" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <h1 class="brand-title">TeamOps</h1>
      <p class="brand-subtitle">Create your account</p>
      <p class="brand-description">Start collaborating with your team and organize tasks in one place.</p>
    </div>

    <div class="login-card">
      <div class="card-header">
        <h2>Create Account</h2>
        <p>Register to get started</p>
      </div>

      <form class="login-form" [formGroup]="form" (ngSubmit)="register()">
        <div class="form-group">
          <label for="username">Username</label>
          <div class="input-wrapper">
            <input
              id="username"
              type="text"
              formControlName="username"
              placeholder="Enter your username"
              [attr.aria-label]="'Username'"
            />
          </div>
          @if (form.get('username')?.invalid && form.get('username')?.touched) {
            <span class="error-text">Username is required</span>
          }
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="Enter your email"
              [attr.aria-label]="'Email'"
            />
          </div>
          @if (form.get('email')?.invalid && form.get('email')?.touched) {
            <span class="error-text">
              @if (form.get('email')?.hasError('required')) {
                Email is required
              } @else if (form.get('email')?.hasError('email')) {
                Enter a valid email address
              }
            </span>
          }
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <input
              id="password"
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              placeholder="Enter your password"
              [attr.aria-label]="'Password'"
            />
            <button
              type="button"
              class="toggle-password"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="'Toggle password visibility'"
            >
              {{ showPassword() ? 'Hide' : 'Show' }}
            </button>
          </div>
          @if (form.get('password')?.invalid && form.get('password')?.touched) {
            <span class="error-text">Password is required</span>
          }
        </div>

        <div class="form-group">
          <label for="confirm_password">Confirm Password</label>
          <div class="input-wrapper">
            <input
              id="confirm_password"
              [type]="showConfirmPassword() ? 'text' : 'password'"
              formControlName="confirm_password"
              placeholder="Confirm your password"
              [attr.aria-label]="'Confirm password'"
            />
            <button
              type="button"
              class="toggle-password"
              (click)="toggleConfirmPasswordVisibility()"
              [attr.aria-label]="'Toggle confirm password visibility'"
            >
              {{ showConfirmPassword() ? 'Hide' : 'Show' }}
            </button>
          </div>
          @if (form.get('confirm_password')?.invalid && form.get('confirm_password')?.touched) {
            <span class="error-text">Confirm password is required</span>
          }
          @if (form.hasError('passwordMismatch') && form.get('confirm_password')?.touched) {
            <span class="error-text">Passwords do not match</span>
          }
        </div>

        @if (error()) {
          <div class="error-banner">
            <span>{{ error() }}</span>
          </div>
        }

        <button
          type="submit"
          class="btn-submit"
          [disabled]="isSubmitDisabled"
          [attr.aria-label]="'Register'"
        >
          @if (loading()) {
            <span class="spinner"></span>
            <span>Creating account...</span>
          } @else {
            <span>Create account</span>
          }
        </button>

        <p class="sign-up-prompt">
          Already have an account? <a routerLink="/login">Sign in</a>
        </p>
      </form>
    </div>
  </div>
</div>
